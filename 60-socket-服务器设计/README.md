### 第60章 SOCKET: 服务器设计

##### 迭代型和并发型服务器

* 迭代型：服务器每次只处理一个客户端，适用于能够快速响应客户端请求的场景
* 并发型：服务器同时可以处理多个客户端，适用于每个请求都需要大量处理时间

##### echo服务器设计

UDP：由于服务器一次只处理一条单独的消息，设计为迭代型就足够了

TCP：客户端可能发生无限量的数据，适合设计为并发型

##### 并发型服务器的其他设计方案

* 在服务器预先创建进程或线程：30章有详细描述，核心理念是服务器在启动阶段就立刻创建一定数量的子进程或线程构成服务池，服务池中每个子进程只处理一个客户端，处理完后，子进程并不终止，而是获取下一个待处理的客户端，应该在负载高峰期增加服务池的大小，负载下降后减小服务池的大小
* 在单个进程中处理多个客户端：必须采用一种能允许单个进程同时监视多个文件描述符上的IO事件，如IO多路复用、信号驱动IO、epoll等，而且服务器需要做一些通常由内核处理的调度任务
* 服务器集群：DNS轮转负载共享，或服务器负载均衡



