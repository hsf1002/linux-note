### 第5章 深入探究文件IO

##### 原子操作和竞争条件

竞争状态是这样一种情形：操作共享资源的两个进程或线程，其结果取决于一个无法预期的顺序

同时指定O_EXCL与O_CREATE时，如果要打开的文件已经存在，返回一个错误，这提供了一种机制：保证进程是打开文件的创建者，对文件是否存在的检查和创建文件属于同一原子操作

多进程同时向一个文件尾部添加数据，要规避竞争状态，需要将文件偏移量的移动和数据写入纳入同一原子操作，在打开文件时加入O_APPEND标志可以保证这点

