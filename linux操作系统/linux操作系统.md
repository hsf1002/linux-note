# linux操作系统

### 内存管理

操作系统会给进程分配一个虚拟地址。所有进程看到的这个地址都是一样的，都是从 0 开始编号。在程序里面，指令写入的地址是虚拟地址。当程序要访问虚拟地址的时候，由内核的数据结构进行转换，转换成不同的物理地址，这样不同的进程运行的时候，写入的是不同的物理地址

内存管理包含：

- 物理内存地址管理
- 虚拟内存地址管理
- 物理内存地址和虚拟内存地址的映射

除了内存管理模块（包括虚拟地址和物理地址映射）, 其他都使用虚拟地址(包括内核)

- 虚拟内存空间包含: 内核空间(高地址); 用户空间(低地址)
- 用户空间从低到高布局为: Text Segment（二进制程序的代码段）、Data Segment（静态常量） 和 BSS Segment（未初始化静态变量）、堆段（malloc分配的空间）、Memory Mapping Segment（内存映射段，如so库文件）、 栈地址空间段（主线程的函数调用的函数栈存放在这）；多个进程的用户空间是独立的
- 多个进程的内核空间是共享的，但内核栈每个进程不一样；内核代码也仅能访问内核空间；内核也有内核代码段, DATA 段, 和 BSS 段，位于内核空间低地址；内核代码也是 ELF 格式

查看进程内存空间分布情况：

```
cat /proc/$pid/map		// mac下不行
```

