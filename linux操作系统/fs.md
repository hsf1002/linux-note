### 文件系统

##### 功能规划

1. 文件系统要有严格的组织形式，使得文件能够以块为单位进行存储
2. 文件系统中要有索引区，用来方便查找一个文件分成的多个块都存放在了什么位置
3. 如果文件系统中有的文件是热点文件，近期经常被读取和写入，文件系统应该有缓存层
4. 文件应该用文件夹的形式组织起来，方便管理和查询，还要有相对路径和绝对路径
5. Linux 内核要在自己的内存里面维护一套数据结构，来保存哪些文件被哪些进程打开和使用

##### 相关命令行

当一个 Linux 系统插入了一块没有格式化的硬盘的时候，通过命令 fdisk -l，查看格式化和没有格式化的分区，可以通过命令 mkfs.ext3 或者 mkfs.ext4 进行格式化

```
mkfs.ext4 /dev/vdc
```

可以选择不将整块盘格式化为一个分区，而是格式化为多个分区。下面的这个命令行可以启动一个交互式程序

```
fdisk /dev/vdc
```

格式化后的硬盘，需要挂在到某个目录下面，才能作为普通的文件系统进行访问

```
mount /dev/vdc1 /根目录/用户A目录/目录1
```

卸载使用 umount 命令

```
umount /根目录/用户A目录/目录1
```

##### 相关接口

```
系统调用：open/lseek/stat/read/write/close
库函数：  opendir/readdir/closedir
```

