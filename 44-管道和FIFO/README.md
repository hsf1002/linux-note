## 第44章 管道和FIFO

### 概述

##### 管道是一个字节流

没有消息边界概念，可以读取任意大小数据，通过管道传递的数据时顺序的，读出来的字节顺序与写入的顺序一致，无法使用lseek随机访问

##### 管道是单向的

在管道中数据的传递方式是单向的，一端用于写入，一端用于读取

##### 管道的容量是有限的

管道其实是内核内存中维护的缓冲器，其存储能力有限

##### 从管道读取数据

管道为空，则读取一直阻塞直到有数据写入，如管道的写入端关闭了，读取剩余数据后文件会结束（read返回0）

##### 向管道写入数据

如果多个进程同时写入同一个管道，如果同一时刻写入的数据量不超过PIPE_BUF字节，可以确保写入的数据不会发生混合的情况，SUSv3要求PIPE_BUF至少为`_POSIX_PIPE_BUF`，可通过fpathconf(fd, _PC_PIPE_BUF)确认，如果写入数据量大于PIPE_BUF，可能与其他进程写入的数据交叉；当只有一个进程写入数据时，该取值就无更重要了

